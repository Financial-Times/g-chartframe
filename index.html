<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Chart frame for D3</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="chart-frame.css">
	<script src="//d3js.org/d3.v4.0.0-alpha.24.min.js" charset="utf-8"></script>
	<script type="text/javascript" src="build/d3-chartframe.js"  charset="utf-8"></script>
</head>
<body>
<article>
	<h1>FT Chart Frames for D3</h1>
		<h2>An example</h2>
		<figure>
			<svg class="example" width="550" height="500"></svg>
			<figcaption>(<a href="https://github.com/tomgp/chart-frame/blob/master/source/main.js">source code</a>)</figcaption>
		</figure>
		<p>First make and configure the chart frame (there are some  'sensible' defaults which you'll almost certainly want to change) &#8230;</p>
		<pre class="code">
var frame = chartFrame()
  .margin({
    left:0
  })
  .title('My lovely chart')
  .subtitle('time vs money')
  .source('Ministry of statistics');
		</pre>
		<p>Then select an SVG element and call &lsquo;frame&rsquo; on it &#8230;</p>
		<pre class="code">
d3.select('svg')
  .call(frame);
		</pre>
		<p>This will result in your SVG having a title and all that stuff and also a &lsquo;g.plot&lsquo; element from where you can get down to the business of making the visualisation bit of the chart. In the case above &#8230;</p>
		<pre class="code">
d3.select('g.chart-plot')
  .append('use')

  	[etc]
		</pre>
	</section>
	<section id="options">
		<h2>Options</h2>

		<section class="option">
			<h3>frame.<b>margin</b>(<i>{ D3 margin convention }</i>)</h3>
			<p>
				Uses the <a href="http://bl.ocks.org/mbostock/3019563">D3 margin convention</a> to position the plot area, i.e. the bit inside the frame.
			</p>
			<pre class="code">
frame.margin({
  top:20,
  left:20,
  right:20,
  bottom:20
});</pre>
			<p>
				You can just <span class="inline-code">top</span>, or just <span class="inline-code">left</span> or whatever. The rest will be defaults. If you don't provide any arguments the function returns the currently set margins.
			</p>
		</section>
		<section class="option">
			<h3>frame.<b>title</b>( <i>string</i> )</h3>
			<p>Set the HTML of the chart's title (if no string is specified returns the current value). *</p>
		</section>
		<section class="option">
			<h3>frame.<b>subtitle</b>( <i>string</i> )</h3>
			<p>Set the HTML of the chart's subtitle (if no string is specified returns the current value).</p>
		</section>
		<section class="option">			
			<h3>frame.<b>source</b>( <i>string</i> )</h3>
			<p>Set the HTML of the chart's source (if no string is specified returns the current value).</p>
		</section>
		<section class="option">
			<h3>frame.<b>dimension</b>()</h3>
			<p>Get the size of the available area i.e. size of the SVG without the margins. Returns an object:</p>
			<pre class="code">
{
	width:500,
	height:500
}</pre>
		</section>
		<section class="option">
			<h3>frame.<b>titleY</b>( <i>position</i> )</h3>
			<p>Set the Y position of the title (if no position is provided returns the current value).</p>
		</section>
		<section class="option">
			<h3>frame.<b>subtitleY</b>( <i>position</i> )</h3>
			<p>Set the Y position of the subtitle (if no position is provided returns the current value).</p>
		</section>
		<section class="option">
			<h3>frame.<b>sourceYOffset</b>( <i>position</i> )</h3>
			<p>How much the source is offset from the bottom of the SVG. (if no position is provided returns the current value).</p>
		</section>
		<section class="option">
			<h3>frame.<b>width</b>( <i>size</i> )</h3>
			<p>Set (or if no argument is specified, retrieve) the width of the available space for the chart frame. *</p>
		</section>
			<section class="option">
			<h3>frame.<b>height</b>( <i>size</i> )</h3>
			<p>Set (or if no argument is specified, retrieve) the height of the available space for the chart frame. *</p>
		</section>
		<section class="option">
			<h3>frame.<b>watermarkLocation</b>( <i>href</i> )</h3>
			<p>This adds a little icon to the bottom right of the chart for attribution purposes, not really  awatermark I suppose. Typically I'd use an external svg file:
				<pre class="code">frame.watermarkLocation('external.svg#element-id');</pre>
			</p>
		</section>
		<section class="option">
			<h3>frame.<b>watermarkSize</b>( <i>size</i> )</h3>
			<p>The size of the icon mentioned above, in pixels.</p>
		</section>
		<section>
			<p><b>* Note:</b> If the chart frame is being called on an SVG element the <i>width</i>, <i>height</i> and <i>title</i> functions will re-write those properties of the parent SVG. If you don't want this to happen you can avoid it by calling the function on a <i><a href="https://developer.mozilla.org/en/docs/Web/SVG/Element/g">group</a></i> element instead.</p>
		</section>
	</section>
	<hr>
	<section>
		Tom Pearson &ndash; December 2015
	</section>
</article>

</body>

<script type="text/javascript">
var watermarkPath = '<path id="logo" d="M1.502 1.5h97.996v98h-97.996v-98zm46.127 23.686h1.866l-.287-9.762h-36.988v1.675c1.18.063 2.074.151 2.68.263.606.112 1.148.359 1.627.742s.797.909.957 1.579c.159.67.239 1.595.239 2.775v30.193c0 1.18-.08 2.097-.239 2.747-.16.654-.479 1.181-.957 1.562-.479.383-1.037.639-1.675.766-.638.128-1.547.208-2.728.239v1.723h20.958v-1.723c-1.468-.031-2.568-.111-3.302-.239-.734-.127-1.372-.383-1.914-.766-.542-.382-.893-.908-1.053-1.562-.16-.65-.239-1.567-.239-2.747v-14.451h3.302c2.967 0 5.136.454 6.507 1.364 1.372.908 2.281 2.623 2.728 5.144h1.675v-15.647h-1.675c-.287 1.627-.71 2.84-1.268 3.637-.558.798-1.443 1.372-2.656 1.723-1.212.352-2.982.527-5.311.527h-3.302v-14.021c0-.894.16-1.491.479-1.794.319-.304.973-.455 1.962-.455h6.699c2.201 0 3.972.096 5.312.287s2.448.566 3.326 1.125c.877.558 1.539 1.212 1.985 1.961.447.75.877 1.795 1.292 3.135zm42.107 0h2.249l-.909-9.762h-38.805l-.909 9.762h2.249c.702-2.393 1.658-4.075 2.871-5.049 1.212-.973 2.982-1.459 5.312-1.459h5.454v33.974c0 1.18-.079 2.097-.239 2.747-.159.654-.502 1.181-1.028 1.562-.526.383-1.141.639-1.843.766-.701.128-1.738.208-3.109.239v1.723h21.341v-1.723c-1.372-.031-2.417-.111-3.135-.239-.718-.127-1.34-.383-1.866-.766-.526-.382-.869-.908-1.028-1.562-.159-.65-.239-1.567-.239-2.747v-33.974h5.455c2.328 0 4.099.486 5.311 1.459 1.21.973 2.167 2.656 2.868 5.049z"/>'

console.log('d3_chartframe ' + d3_chartframe.version);
var webframe = d3_chartframe.frame()
	.watermark(watermarkPath)
	.titleStyle({
		'font-size':25
	})
	.subtitleStyle({
		'font-size':20
	})
	.sourceStyle({
		'font-style':'italic'
	});



d3.select('svg')
	.call(webframe);

// the g.chart-plot element has been created in the correct place by calling 'frame'


</script>
</html>